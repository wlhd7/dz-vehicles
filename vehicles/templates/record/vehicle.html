{% extends "base.html" %}

{% block content %}
<h2>车辆操作记录（最近 200 条）</h2>
<form method="get" action="{{ url_for('record.vehicle') }}" style="margin-top:8px; margin-bottom:8px;">
	<label for="plate">车辆牌照过滤：</label>
	<input id="plate" name="plate" value="{{ plate or '' }}" placeholder="输入车牌，如 ABC-123" />
	<button type="submit">筛选</button>
	{% if plate %}<a href="{{ url_for('record.vehicle') }}" style="margin-left:8px;">清除</a>{% endif %}
</form>
<table style="width:100%; border-collapse:collapse; margin-top:8px;">
	<thead>
		<tr>
			<th style="text-align:left; padding:6px; border-bottom:1px solid #ccc;">时间</th>
			<th style="text-align:left; padding:6px; border-bottom:1px solid #ccc;">车辆</th>
			<th style="text-align:left; padding:6px; border-bottom:1px solid #ccc;">操作</th>
			<th style="text-align:left; padding:6px; border-bottom:1px solid #ccc;">姓名</th>
		</tr>
	</thead>
	<tbody>
	{% for r in records %}
		<tr>
			<td style="padding:6px; border-bottom:1px solid #eee;">{{ r['timestamp'] }}</td>
			<td style="padding:6px; border-bottom:1px solid #eee;">{{ r['vehicle_plate'] or '未知' }}</td>
			<td style="padding:6px; border-bottom:1px solid #eee;">{% if r['action'] == 'taken' %}取{% elif r['action'] == 'returned' %}还{% else %}{{ r['action'] }}{% endif %}</td>
			<td style="padding:6px; border-bottom:1px solid #eee;">{{ r['username'] or '匿名' }}</td>
		</tr>
	{% else %}
		<tr><td colspan="4" style="padding:6px;">暂无记录。</td></tr>
	{% endfor %}
	</tbody>
</table>

{% endblock %}
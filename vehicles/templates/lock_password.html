{% extends 'base.html' %}

{% block content %}
<h2>管理临时密码</h2>
{% if message %}
  <p>{{ message }}</p>
{% endif %}
<form method="post">
  <label for="password">密码（文本）</label>
  <input id="password" name="password" required />
  <button type="submit">添加</button>
</form>

<script>
  // Focus the password input on page load for quick entry
  (function(){
    var pw = document.getElementById('password');
    if (pw) pw.focus();
    // Also move focus to input when the submit button is clicked (helps if focus was elsewhere)
    var btn = document.querySelector('form button[type="submit"]');
    if (btn && pw) {
      btn.addEventListener('click', function(){
        setTimeout(function(){ pw.focus(); }, 10);
      });
    }
  })();
</script>

<h3>现有密码</h3>
<table>
  <thead><tr><th>ID</th><th>密码</th></tr></thead>
  <tbody>
  {% for p in passwords %}
    <tr>
      <td>{{ p['id'] }}</td>
      <td>{{ p['password'] }}</td>
      
    </tr>
  {% endfor %}
  </tbody>
</table>

{% endblock %}
